<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VORTEX POS | –¢–µ—Ä–º–∏–Ω–∞–ª –ü—Ä–æ–¥–∞–∂</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

    <header>
        <div class="container header-content">
            <nav>
                <a href="/" class="logo">VORTEX POS</a>
                <a href="/products">–ü—Ä–æ–¥—É–∫—Ç—ã</a>
                <a href="/services">–£—Å–ª—É–≥–∏</a>
                <a href="/about">–û –Ω–∞—Å</a>
                <a href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                <a href="/pos" class="active">–ö–∞—Å—Å–∞</a>
            </nav>
            <button id="toggle-management" class="btn btn-secondary"><i class="fas fa-cog"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
        </div>
    </header>

    <main class="pos-layout container">
        
        <section class="cart-section">
            <h2>–¢–µ–∫—É—â–∏–π –ß–µ–∫</h2>
            
            <div id="cart-message" class="message-area"></div>
            
            <div class="scan-area">
                <input type="text" id="scan-input" placeholder="–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ SKU/–Ω–∞–∑–≤–∞–Ω–∏–µ" autofocus>
                <i class="fas fa-barcode"></i>
            </div>

            <div class="cart-table-container">
                <table class="cart-table">
                    <thead>
                        <tr>
                            <th>–¢–æ–≤–∞—Ä</th>
                            <th style="width: 80px;">–ö–æ–ª-–≤–æ</th>
                            <th style="width: 120px;">–°—É–º–º–∞</th>
                            <th style="width: 50px;"></th>
                        </tr>
                    </thead>
                    <tbody id="cart-tbody">
                        </tbody>
                </table>
            </div>

            <div class="cart-summary">
                <span class="total-label">–ò–¢–û–ì–û –ö –û–ü–õ–ê–¢–ï:</span>
                <span id="total-amount" class="total-amount">0.00 KZT</span>
            </div>

            <div class="cart-actions">
                <button id="clear-cart" class="btn btn-danger"><i class="fas fa-trash-alt"></i> –û—á–∏—Å—Ç–∏—Ç—å –ß–µ–∫</button>
                <button id="complete-sale" class="btn btn-primary"><i class="fas fa-shopping-cart"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å –ü—Ä–æ–¥–∞–∂—É</button>
            </div>
        </section>
        
        <section class="product-catalog-section">
            <h2>–ö–∞—Ç–∞–ª–æ–≥ –ü—Ä–æ–¥—É–∫—Ü–∏–∏</h2>
            <div id="product-list" class="product-grid">
                </div>
        </section>
    </main>

    <div id="payment-modal" class="modal">
        <div class="modal-content payment-content">
            <span class="close-btn payment-close-btn">&times;</span>
            <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ü—Ä–æ–¥–∞–∂–∏</h3>

            <div class="payment-details">
                <div class="summary-line">
                    <span>–°–£–ú–ú–ê –ö –û–ü–õ–ê–¢–ï:</span>
                    <span id="payment-due-amount" class="total-amount">0.00 KZT</span>
                </div>
            </div>
            
            <hr>

            <div class="input-group">
                <label for="organization-select">–ü—Ä–æ–¥–∞–∂–∞ –æ—Ç:</label>
                <select id="organization-select">
                    <option value="vortex">VORTEX (–¢–û–û "–ê–¥—ã–º –ò–Ω–∂–µ–Ω–∏—Ä–∏–Ω–≥")</option>
                    <option value="partner">–ü–∞—Ä—Ç–Ω–µ—Ä 1</option>
                </select>
            </div>

            <div class="input-group counterparty-selection">
                <label for="counterparty-select">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å):</label>
                <div class="counterparty-row">
                    <select id="counterparty-select">
                        <option value="none">-- –§–∏–∑–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ (–ë–µ–∑ –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞) --</option>
                        </select>
                    <button id="add-counterparty-btn" class="btn btn-secondary-small" title="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞">
                        <i class="fas fa-user-plus"></i>
                    </button>
                </div>
            </div>

            <hr>
            
            <h4>–°–ø–æ—Å–æ–± –û–ø–ª–∞—Ç—ã</h4>
            <div id="payment-mode-selection" class="payment-options">
                <button class="payment-option-btn" data-mode="cash"><i class="fas fa-money-bill-wave"></i> –ù–∞–ª–∏—á–Ω—ã–µ</button>
                <button class="payment-option-btn" data-mode="card"><i class="fas fa-credit-card"></i> –ö–∞—Ä—Ç–∞</button>
                <button class="payment-option-btn" data-mode="bank"><i class="fas fa-university"></i> –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ</button>
                <button class="payment-option-btn" data-mode="mixed"><i class="fas fa-exchange-alt"></i> –°–º–µ—à–∞–Ω–Ω–∞—è</button>
            </div>
            
            <div id="mixed-payment-block" class="mixed-payment-container" style="display: none;">
                <h5>–°–º–µ—à–∞–Ω–Ω–∞—è –û–ø–ª–∞—Ç–∞</h5>
                <div class="mixed-input-row">
                    <div class="input-group">
                        <label for="mixed-cash-amount">–ù–∞–ª–∏—á–Ω—ã–µ (–ß–∞—Å—Ç—å 1):</label>
                        <input type="number" id="mixed-cash-amount" step="0.01" min="0" value="0.00">
                    </div>
                    <div class="input-group">
                        <label for="mixed-second-mode">–û—Å—Ç–∞—Ç–æ–∫ (–ß–∞—Å—Ç—å 2):</label>
                        <select id="mixed-second-mode">
                            <option value="card">–ö–∞—Ä—Ç–∞</option>
                            <option value="bank">–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ</option>
                        </select>
                    </div>
                </div>
                <div class="summary-line remaining-line">
                    <span>–û–°–¢–ê–¢–û–ö (–ß–∞—Å—Ç—å 2):</span>
                    <span id="mixed-remaining-amount">0.00 KZT</span>
                </div>
            </div>

            <div id="payment-message" class="message-area"></div>

            <button id="finalize-payment-btn" class="btn btn-success full-width-btn">–ó–ê–í–ï–†–®–ò–¢–¨ –ü–†–û–î–ê–ñ–£</button>

        </div>
    </div>
    
    <div id="counterparty-modal" class="modal">
        <div class="modal-content small-content">
            <span class="close-btn counterparty-close-btn">&times;</span>
            <h3>–î–æ–±–∞–≤–∏—Ç—å –ù–æ–≤–æ–≥–æ –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞</h3>
            
            <form id="counterparty-form">
                <div class="input-group">
                    <label for="new-counterparty-name">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ*:</label>
                    <input type="text" id="new-counterparty-name" required maxlength="255">
                </div>
                <div class="input-group">
                    <label for="new-counterparty-bin">–ë–ò–ù / –ò–ò–ù (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <input type="text" id="new-counterparty-bin" maxlength="12">
                </div>
                <div class="input-group">
                    <label for="new-counterparty-phone">–¢–µ–ª–µ—Ñ–æ–Ω (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <input type="text" id="new-counterparty-phone" maxlength="20">
                </div>

                <div id="counterparty-message" class="message-area"></div>
                
                <button type="submit" class="btn btn-primary full-width-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞</button>
            </form>
        </div>
    </div>

    <div id="quick-add-modal" class="modal">
        <div class="modal-content small-content">
            <span class="close-btn quick-add-close-btn">&times;</span>
            <h3>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ß–µ–∫</h3>
            <p style="font-size: 1.2em; font-weight: bold;"><span id="quick-add-product-name"></span></p>
            <p>–¶–µ–Ω–∞: <span id="quick-add-product-price"></span></p>
            
            <form id="quick-add-form">
                <input type="hidden" id="quick-add-product-id">
                <div class="input-group">
                    <label for="quick-add-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <input type="number" id="quick-add-quantity" min="0.01" step="0.01" value="1.00" required>
                </div>
                <div id="quick-add-message" class="message-area"></div>
                <button type="submit" class="btn btn-success full-width-btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –ß–µ–∫</button>
            </form>
        </div>
    </div>
    
    <div id="management-modal" class="modal">
        <div class="modal-content large-content">
            <span class="close-btn management-close-btn">&times;</span>
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¢–æ–≤–∞—Ä–∞–º–∏ (CRUD)</h3>

            <div class="management-grid">
                <div class="management-column">
                    <h4>‚ûï –°–æ–∑–¥–∞—Ç—å –ù–æ–≤—ã–π –¢–æ–≤–∞—Ä</h4>
                    <form id="product-form">
                        <div class="input-group">
                            <label for="name">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ*:</label>
                            <input type="text" id="name" required maxlength="255">
                        </div>
                        <div class="input-group">
                            <label for="price">–¶–µ–Ω–∞* (KZT):</label>
                            <input type="number" id="price" step="0.01" min="0.01" required>
                        </div>
                        <div class="input-group">
                            <label for="sku">SKU / –ê—Ä—Ç–∏–∫—É–ª*:</label>
                            <input type="text" id="sku" required maxlength="50">
                        </div>
                        <div class="input-group">
                            <label for="stock">–û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ:</label>
                            <input type="number" id="stock" step="0.01" min="0" value="0.00">
                        </div>
                        <div class="input-group">
                            <label for="image_url">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑.):</label>
                            <input type="url" id="image_url">
                        </div>
                        
                        <div id="form-message" class="message-area"></div>

                        <button type="submit" class="btn btn-primary full-width-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¢–æ–≤–∞—Ä</button>
                    </form>
                    
                    <div class="api-status-block">
                        <h4>–°—Ç–∞—Ç—É—Å API</h4>
                        <button id="test-api" class="btn btn-secondary-small"><i class="fas fa-sync"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Backend</button>
                        <p id="api-status"></p>
                    </div>
                </div>

                <div class="management-column">
                    <h4>üõ†Ô∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å / –£–¥–∞–ª–∏—Ç—å (–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —Ç–æ–≤–∞—Ä—É)</h4>
                    <div id="crud-product-list" class="crud-list">
                        </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="edit-modal" class="modal">
        <div class="modal-content small-content">
            <span class="close-btn edit-close-btn">&times;</span>
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–æ–≤–∞—Ä–∞ ID <span id="edit-product-id"></span></h3>
            
            <form id="edit-product-form">
                <input type="hidden" id="edit-id">
                <div class="input-group">
                    <label for="edit-name">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ*:</label>
                    <input type="text" id="edit-name" required maxlength="255">
                </div>
                <div class="input-group">
                    <label for="edit-price">–¶–µ–Ω–∞* (KZT):</label>
                    <input type="number" id="edit-price" step="0.01" min="0.01" required>
                </div>
                <div class="input-group">
                    <label for="edit-sku">SKU / –ê—Ä—Ç–∏–∫—É–ª*:</label>
                    <input type="text" id="edit-sku" required maxlength="50">
                </div>
                <div class="input-group">
                    <label for="edit-stock">–û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ:</label>
                    <input type="number" id="edit-stock" step="0.01" min="0" value="0.00">
                </div>
                <div class="input-group">
                    <label for="edit-image_url">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑.):</label>
                    <input type="url" id="edit-image_url">
                </div>

                <div id="edit-form-message" class="message-area"></div>
                
                <button type="submit" class="btn btn-success">–û–±–Ω–æ–≤–∏—Ç—å –¢–æ–≤–∞—Ä</button>
                <button type="button" id="delete-product-btn" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å –¢–æ–≤–∞—Ä</button>
            </form>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2024 VORTEX POS. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script src="/static/js/pos.js"></script>
</body>
</html>
